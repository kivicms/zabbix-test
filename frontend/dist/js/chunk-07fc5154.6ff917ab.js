(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-07fc5154"],{"1dde":function(t,e,n){var o=n("d039"),r=n("b622"),s=n("2d00"),a=r("species");t.exports=function(t){return s>=51||!o((function(){var e=[],n=e.constructor={};return n[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},8418:function(t,e,n){"use strict";var o=n("c04e"),r=n("9bf2"),s=n("5c6c");t.exports=function(t,e,n){var a=o(e);a in t?r.f(t,a,s(0,n)):t[a]=n}},"986f":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("d4ec"),r=function t(e,n,r,s,a,i){Object(o["a"])(this,t),this.type="",this.main="",this.useip="",this.ip="",this.dns="",this.port="",this.type=e,this.main=n,this.useip=r,this.ip=s,this.dns=a,this.port=i}},a434:function(t,e,n){"use strict";var o=n("23e7"),r=n("23cb"),s=n("a691"),a=n("50c4"),i=n("7b0b"),c=n("65f0"),l=n("8418"),u=n("1dde"),p=n("ae40"),d=u("splice"),v=p("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,f=Math.min,h=9007199254740991,y="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!d||!v},{splice:function(t,e){var n,o,u,p,d,v,g=i(this),b=a(g.length),x=r(t,b),C=arguments.length;if(0===C?n=o=0:1===C?(n=0,o=b-x):(n=C-2,o=f(m(s(e),0),b-x)),b+n-o>h)throw TypeError(y);for(u=c(g,o),p=0;p<o;p++)d=x+p,d in g&&l(u,p,g[d]);if(u.length=o,n<o){for(p=x;p<b-o;p++)d=p+o,v=p+n,d in g?g[v]=g[d]:delete g[v];for(p=b;p>b-o+n;p--)delete g[p-1]}else if(n>o)for(p=b-o;p>x;p--)d=p+o-1,v=p+n-1,d in g?g[v]=g[d]:delete g[v];for(p=0;p<n;p++)g[p+x]=arguments[p+2];return g.length=b-o+n,u}})},a6a4:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-header"},[t._v(" Редактирование хоста: "),n("router-link",{staticClass:"btn btn-sm btn-outline-dark float-right",attrs:{to:"/device-list"}},[n("font-awesome-icon",{attrs:{icon:"arrow-left"}})],1)],1),t.isLoaded?n("div",{staticClass:"card-body"},[n("form",[t.errors.length?n("div",[n("b",[t._v("Пожалуйста исправьте указанные ошибки:")]),n("ul",t._l(t.errors,(function(e,o){return n("li",{key:o},[n("span",{staticClass:"text-danger"},[t._v(t._s(e))])])})),0)]):t._e(),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"form-group"},[n("label",[t._v("Хост")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.host,expression:"entry.host"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.entry.host},on:{input:function(e){e.target.composing||t.$set(t.entry,"host",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Название")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.name,expression:"entry.name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.entry.name},on:{input:function(e){e.target.composing||t.$set(t.entry,"name",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Группы")]),n("v-select",{attrs:{options:t.groups,reduce:function(t){return t.groupid},label:"name",multiple:"",taggable:""},model:{value:t.selectedGroups,callback:function(e){t.selectedGroups=e},expression:"selectedGroups"}})],1),n("div",{staticClass:"form-group"},[n("label",[t._v("Описание")]),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.entry.description,expression:"entry.description"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.entry.description},on:{input:function(e){e.target.composing||t.$set(t.entry,"description",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Местоположение")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.inventory.location,expression:"entry.inventory.location"}],staticClass:"form-control",attrs:{required:""},domProps:{value:t.entry.inventory.location},on:{input:function(e){e.target.composing||t.$set(t.entry.inventory,"location",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Широта")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.inventory.location_lat,expression:"entry.inventory.location_lat"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.entry.inventory.location_lat},on:{input:function(e){e.target.composing||t.$set(t.entry.inventory,"location_lat",e.target.value)}}})]),n("div",{staticClass:"form-group"},[n("label",[t._v("Долгота")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.inventory.location_lon,expression:"entry.inventory.location_lon"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.entry.inventory.location_lon},on:{input:function(e){e.target.composing||t.$set(t.entry.inventory,"location_lon",e.target.value)}}})])])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("table",{staticClass:"table table-bordered table-hover"},[n("thead",[n("tr",[n("th",[t._v("Тип интерфейса")]),n("th",[t._v("DNS")]),n("th",[t._v("IP")]),n("th",[t._v("Port")]),n("th",[t._v("Use IP")]),n("th",[t._v("Main")]),n("th",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-outline-success btn-sm",attrs:{type:"button"},on:{click:t.addInterface}},[n("font-awesome-icon",{attrs:{icon:"plus"}})],1)])])]),n("tbody",t._l(t.entry.interfaces,(function(e,o){return n("tr",{key:o},[n("td",[n("b-form-select",{staticClass:"form-control",attrs:{options:t.iTypes,reduce:function(t){return t.value}},model:{value:e.type,callback:function(n){t.$set(e,"type",n)},expression:"i.type"}})],1),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.dns,expression:"i.dns"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.dns},on:{input:function(n){n.target.composing||t.$set(e,"dns",n.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.ip,expression:"i.ip"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.ip},on:{input:function(n){n.target.composing||t.$set(e,"ip",n.target.value)}}})]),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.port,expression:"i.port"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.port},on:{input:function(n){n.target.composing||t.$set(e,"port",n.target.value)}}})]),n("td",[n("b-form-select",{staticClass:"form-control",attrs:{options:[{text:"Use DNS",value:0},{text:"Use IP",value:1}],reduce:function(t){return t.value}},model:{value:e.useip,callback:function(n){t.$set(e,"useip",n)},expression:"i.useip"}})],1),n("td",[n("b-form-select",{staticClass:"form-control",attrs:{options:[{text:"Нет",value:0},{text:"Да",value:1}],reduce:function(t){return t.value}},model:{value:e.main,callback:function(n){t.$set(e,"main",n)},expression:"i.main"}})],1),n("td",{staticClass:"text-center"},[n("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.removeInterface(o)}}},[n("font-awesome-icon",{attrs:{icon:"minus"}})],1)])])})),0)])])]),n("div",{staticClass:"form-group"},[n("button",{staticClass:"btn btn-outline-success",attrs:{type:"button"},on:{click:t.submit}},[n("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Сохранить ")],1)])])]):t._e()])},r=[],s=(n("a4d3"),n("e01a"),n("d81d"),n("a434"),n("b0c0"),n("d4ec")),a=n("bee2"),i=n("99de"),c=n("7e84"),l=n("262e"),u=n("9ab4"),p=n("60a3"),d=n("986f"),v=function(t){function e(){var t;return Object(s["a"])(this,e),t=Object(i["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.isLoaded=!1,t.iTypes=[{text:"Агент",value:"1"},{text:"SNMP",value:"2"},{text:"IPMI",value:"3"},{text:"JMX",value:"4"}],t.hostId="",t.groupsRpc={jsonrpc:"2.0",method:"hostgroup.get",params:{output:"extend",sortfield:"name"},id:1,auth:""},t.updateRpc={jsonrpc:"2.0",method:"host.get",params:{output:"extend",hostids:"",selectInterfaces:"extend",selectGroups:"extend",selectInventory:"extend"},auth:"",id:1},t.groups=[],t.errors=[],t.selectedGroups=[],t}return Object(l["a"])(e,t),Object(a["a"])(e,[{key:"mounted",value:function(){var t,e=this,n=null!==(t=localStorage.getItem("token"))&&void 0!==t?t:"";this.groupsRpc.auth=n,this.updateRpc.auth=n,this.hostId=this.$route.params.id,this.updateRpc.params.hostids=this.hostId,this.fetchGroups(),this.$axios.post("http://localhost:8888/api_jsonrpc.php",this.updateRpc).then((function(t){e.entry=t.data.result[0],e.selectedGroups=t.data.result[0].groups.map((function(t){return t.groupid})),e.isLoaded=!0})).catch((function(t){console.log(t)}))}},{key:"fetchGroups",value:function(){var t=this;this.$axios.post("http://localhost:8888/api_jsonrpc.php",this.groupsRpc).then((function(e){t.groups=e.data.result})).catch((function(t){console.log(t)}))}},{key:"checkForm",value:function(t){this.entry.host||this.errors.push("Укажите хост"),this.entry.name||this.errors.push("Укажите название"),t.preventDefault()}},{key:"addInterface",value:function(){this.entry.interfaces.push(new d["a"]("0","0","0","","",""))}},{key:"removeInterface",value:function(t){console.log(t),this.entry.interfaces.splice(t,1)}},{key:"submit",value:function(t){var e=this;this.errors=[],this.checkForm(t),t.preventDefault();var n={jsonrpc:"2.0",method:"host.update",params:{hostid:this.hostId,host:this.entry.host,name:this.entry.name,description:this.entry.description,inventory:{location:this.entry.inventory.location,location_lat:this.entry.inventory.location_lat,location_lon:this.entry.inventory.location_lon},interfaces:this.entry.interfaces,groups:this.selectedGroups.map((function(t){return{groupid:t}}))},auth:localStorage.getItem("token"),id:3};this.$axios.post("http://localhost:8888/api_jsonrpc.php",n).then((function(t){t.data.error?alert(t.data.error.data):e.$router.push("/device-list")})).catch((function(t){console.log(t)}))}}]),e}(p["c"]);v=Object(u["a"])([p["a"]],v);var m=v,f=m,h=n("2877"),y=Object(h["a"])(f,o,r,!1,null,null,null);e["default"]=y.exports},ae40:function(t,e,n){var o=n("83ab"),r=n("d039"),s=n("5135"),a=Object.defineProperty,i={},c=function(t){throw t};t.exports=function(t,e){if(s(i,t))return i[t];e||(e={});var n=[][t],l=!!s(e,"ACCESSORS")&&e.ACCESSORS,u=s(e,0)?e[0]:c,p=s(e,1)?e[1]:void 0;return i[t]=!!n&&!r((function(){if(l&&!o)return!0;var t={length:-1};l?a(t,1,{enumerable:!0,get:c}):t[1]=1,n.call(t,u,p)}))}},b0c0:function(t,e,n){var o=n("83ab"),r=n("9bf2").f,s=Function.prototype,a=s.toString,i=/^\s*function ([^ (]*)/,c="name";!o||c in s||r(s,c,{configurable:!0,get:function(){try{return a.call(this).match(i)[1]}catch(t){return""}}})},bee2:function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function r(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.d(e,"a",(function(){return r}))},d81d:function(t,e,n){"use strict";var o=n("23e7"),r=n("b727").map,s=n("1dde"),a=n("ae40"),i=s("map"),c=a("map");o({target:"Array",proto:!0,forced:!i||!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-07fc5154.6ff917ab.js.map