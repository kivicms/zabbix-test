(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e3645f8"],{"1dde":function(t,e,o){var a=o("d039"),s=o("b622"),n=o("2d00"),i=s("species");t.exports=function(t){return n>=51||!a((function(){var e=[],o=e.constructor={};return o[i]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},5377:function(t,e,o){var a=o("83ab"),s=o("9bf2"),n=o("ad6d"),i=o("9f7f").UNSUPPORTED_Y;a&&("g"!=/./g.flags||i)&&s.f(RegExp.prototype,"flags",{configurable:!0,get:n})},7386:function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.isReady?o("div",{staticClass:"card"},[o("div",{staticClass:"card-header"},[t._v(" Добавить хост "),o("router-link",{staticClass:"btn btn-sm btn-outline-dark float-right",attrs:{to:"/device-list"}},[o("font-awesome-icon",{attrs:{icon:"arrow-left"}})],1)],1),o("div",{staticClass:"card-body"},[o("form",{on:{submit:t.checkForm}},[t.errors.length?o("div",[o("b",[t._v("Пожалуйста исправьте указанные ошибки:")]),o("ul",t._l(t.errors,(function(e,a){return o("li",{key:a},[o("span",{staticClass:"text-danger"},[t._v(t._s(e))])])})),0)]):t._e(),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("div",{staticClass:"form-group"},[o("label",[t._v("Хост")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.createDeviceRequest.host,expression:"createDeviceRequest.host"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.createDeviceRequest.host},on:{input:function(e){e.target.composing||t.$set(t.createDeviceRequest,"host",e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",[t._v("Название")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.createDeviceRequest.name,expression:"createDeviceRequest.name"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.createDeviceRequest.name},on:{input:function(e){e.target.composing||t.$set(t.createDeviceRequest,"name",e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",[t._v("Группы")]),o("v-select",{attrs:{options:t.groups,label:"name",multiple:"",taggable:""},model:{value:t.selectedGroups,callback:function(e){t.selectedGroups=e},expression:"selectedGroups"}})],1),o("div",{staticClass:"form-group"},[o("label",[t._v("Описание")]),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.createDeviceRequest.description,expression:"createDeviceRequest.description"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.createDeviceRequest.description},on:{input:function(e){e.target.composing||t.$set(t.createDeviceRequest,"description",e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",[t._v("Местоположение")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.createDeviceRequest.inventory.location,expression:"createDeviceRequest.inventory.location"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.createDeviceRequest.inventory.location},on:{input:function(e){e.target.composing||t.$set(t.createDeviceRequest.inventory,"location",e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",[t._v("Широта")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.createDeviceRequest.inventory.location_lat,expression:"createDeviceRequest.inventory.location_lat"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.createDeviceRequest.inventory.location_lat},on:{input:function(e){e.target.composing||t.$set(t.createDeviceRequest.inventory,"location_lat",e.target.value)}}})]),o("div",{staticClass:"form-group"},[o("label",[t._v("Долгота")]),o("input",{directives:[{name:"model",rawName:"v-model",value:t.createDeviceRequest.inventory.location_lon,expression:"createDeviceRequest.inventory.location_lon"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.createDeviceRequest.inventory.location_lon},on:{input:function(e){e.target.composing||t.$set(t.createDeviceRequest.inventory,"location_lon",e.target.value)}}})])])]),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("table",{staticClass:"table table-bordered table-hover"},[o("thead",[o("tr",[o("th",[t._v("Тип интерфейса")]),o("th",[t._v("DNS")]),o("th",[t._v("IP")]),o("th",[t._v("Port")]),o("th",[t._v("Use IP")]),o("th",[t._v("Main")]),o("th",{staticClass:"text-center"},[o("button",{staticClass:"btn btn-outline-success btn-sm",attrs:{type:"button"},on:{click:t.addInterface}},[o("font-awesome-icon",{attrs:{icon:"plus"}})],1)])])]),o("tbody",t._l(t.createDeviceRequest.interfaces,(function(e,a){return o("tr",{key:a},[o("td",[o("b-form-select",{staticClass:"form-control",attrs:{options:t.iTypes,reduce:function(t){return t.value}},model:{value:e.type,callback:function(o){t.$set(e,"type",o)},expression:"i.type"}})],1),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.dns,expression:"i.dns"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.dns},on:{input:function(o){o.target.composing||t.$set(e,"dns",o.target.value)}}})]),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.ip,expression:"i.ip"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.ip},on:{input:function(o){o.target.composing||t.$set(e,"ip",o.target.value)}}})]),o("td",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.port,expression:"i.port"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.port},on:{input:function(o){o.target.composing||t.$set(e,"port",o.target.value)}}})]),o("td",[o("b-form-select",{staticClass:"form-control",attrs:{options:[{text:"Use DNS",value:0},{text:"Use IP",value:1}],reduce:function(t){return t.value}},model:{value:e.useip,callback:function(o){t.$set(e,"useip",o)},expression:"i.useip"}})],1),o("td",[o("b-form-select",{staticClass:"form-control",attrs:{options:[{text:"Нет",value:0},{text:"Да",value:1}],reduce:function(t){return t.value}},model:{value:e.main,callback:function(o){t.$set(e,"main",o)},expression:"i.main"}})],1),o("td",{staticClass:"text-center"},[o("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.removeInterface(a)}}},[o("font-awesome-icon",{attrs:{icon:"minus"}})],1)])])})),0)])])]),o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-outline-success",attrs:{type:"submit"},on:{click:t.submit}},[o("font-awesome-icon",{attrs:{icon:"save"}}),t._v(" Сохранить ")],1)])])])]):t._e()},s=[],n=(o("d81d"),o("a434"),o("b0c0"),o("d4ec")),i=o("bee2"),r=o("99de"),c=o("7e84"),u=o("262e"),l=o("9ab4"),p=o("60a3"),v=(o("5377"),function t(e){Object(n["a"])(this,t),this.groupid="",this.name="",this.internal="",this.flags="",this.groupid=e}),d=o("986f"),f=function t(){var e;Object(n["a"])(this,t),this.jsonrpc="2.0",this.method="host.get",this.auth="",this.id=0,this.auth=null!==(e=localStorage.getItem("token"))&&void 0!==e?e:""},m=function t(){Object(n["a"])(this,t),this.location="",this.location_lon="",this.location_lat=""},h=function(t){function e(t){var o;return Object(n["a"])(this,e),o=Object(r["a"])(this,Object(c["a"])(e).call(this)),o.groups=[],o.inventory=new m,o.interfaces=[],o.method=t,o}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"getData",value:function(){return{jsonrpc:this.jsonrpc,method:this.method,id:this.id,auth:this.auth,params:{host:this.host,name:this.name,groups:this.groups,inventory:this.inventory,interfaces:this.interfaces}}}}]),e}(f),g=function(t){function e(){var t;return Object(n["a"])(this,e),t=Object(r["a"])(this,Object(c["a"])(e).apply(this,arguments)),t.isReady=!1,t.iTypes=[{text:"Агент",value:1},{text:"SNMP",value:2},{text:"IPMI",value:3},{text:"JMX",value:4}],t.groupsRpc={jsonrpc:"2.0",method:"hostgroup.get",params:{output:"extend",sortfield:"name"},id:1,auth:""},t.createDeviceRequest=new h("host.create"),t.createRpc={jsonrpc:"2.0",method:"host.create",params:{host:null,name:null,description:null,groups:[],interfaces:[],inventory:{location:"",location_lat:"",location_lon:""}},id:2,auth:""},t.groups=[],t.errors=[],t.selectedGroups=[],t}return Object(u["a"])(e,t),Object(i["a"])(e,[{key:"mounted",value:function(){var t,e=null!==(t=localStorage.getItem("token"))&&void 0!==t?t:"";this.groupsRpc.auth=e,this.createRpc.auth=e,this.fetchGroups()}},{key:"fetchGroups",value:function(){var t=this;this.$axios.post("http://localhost:8888/api_jsonrpc.php",this.groupsRpc).then((function(e){t.groups=e.data.result,t.isReady=!0})).catch((function(t){console.log(t)}))}},{key:"checkForm",value:function(t){this.createDeviceRequest.host||this.errors.push("Укажите хост"),this.createDeviceRequest.name||this.errors.push("Укажите название"),t.preventDefault()}},{key:"addInterface",value:function(){this.createDeviceRequest.interfaces.push(new d["a"]("0","0","0","","","10050"))}},{key:"removeInterface",value:function(t){console.log(t),this.createDeviceRequest.interfaces.splice(t,1)}},{key:"submit",value:function(t){var e=this;this.errors=[],this.checkForm(t),t.preventDefault(),this.createDeviceRequest.groups=this.selectedGroups.map((function(t){return new v(t.groupid)})),this.$axios.post("http://localhost:8888/api_jsonrpc.php",this.createDeviceRequest.getData()).then((function(t){t.data.error?alert(t.data.error.data):e.$router.push("/device-list")})).catch((function(t){console.log(t)}))}}]),e}(p["c"]);g=Object(l["a"])([p["a"]],g);var b=g,y=b,x=o("2877"),R=Object(x["a"])(y,a,s,!1,null,null,null);e["default"]=R.exports},8418:function(t,e,o){"use strict";var a=o("c04e"),s=o("9bf2"),n=o("5c6c");t.exports=function(t,e,o){var i=a(e);i in t?s.f(t,i,n(0,o)):t[i]=o}},"986f":function(t,e,o){"use strict";o.d(e,"a",(function(){return s}));var a=o("d4ec"),s=function t(e,o,s,n,i,r){Object(a["a"])(this,t),this.type="",this.main="",this.useip="",this.ip="",this.dns="",this.port="",this.type=e,this.main=o,this.useip=s,this.ip=n,this.dns=i,this.port=r}},"9f7f":function(t,e,o){"use strict";var a=o("d039");function s(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=a((function(){var t=s("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=a((function(){var t=s("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a434:function(t,e,o){"use strict";var a=o("23e7"),s=o("23cb"),n=o("a691"),i=o("50c4"),r=o("7b0b"),c=o("65f0"),u=o("8418"),l=o("1dde"),p=o("ae40"),v=l("splice"),d=p("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,m=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!v||!d},{splice:function(t,e){var o,a,l,p,v,d,b=r(this),y=i(b.length),x=s(t,y),R=arguments.length;if(0===R?o=a=0:1===R?(o=0,a=y-x):(o=R-2,a=m(f(n(e),0),y-x)),y+o-a>h)throw TypeError(g);for(l=c(b,a),p=0;p<a;p++)v=x+p,v in b&&u(l,p,b[v]);if(l.length=a,o<a){for(p=x;p<y-a;p++)v=p+a,d=p+o,v in b?b[d]=b[v]:delete b[d];for(p=y;p>y-a+o;p--)delete b[p-1]}else if(o>a)for(p=y-a;p>x;p--)v=p+a-1,d=p+o-1,v in b?b[d]=b[v]:delete b[d];for(p=0;p<o;p++)b[p+x]=arguments[p+2];return b.length=y-a+o,l}})},ad6d:function(t,e,o){"use strict";var a=o("825a");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ae40:function(t,e,o){var a=o("83ab"),s=o("d039"),n=o("5135"),i=Object.defineProperty,r={},c=function(t){throw t};t.exports=function(t,e){if(n(r,t))return r[t];e||(e={});var o=[][t],u=!!n(e,"ACCESSORS")&&e.ACCESSORS,l=n(e,0)?e[0]:c,p=n(e,1)?e[1]:void 0;return r[t]=!!o&&!s((function(){if(u&&!a)return!0;var t={length:-1};u?i(t,1,{enumerable:!0,get:c}):t[1]=1,o.call(t,l,p)}))}},b0c0:function(t,e,o){var a=o("83ab"),s=o("9bf2").f,n=Function.prototype,i=n.toString,r=/^\s*function ([^ (]*)/,c="name";!a||c in n||s(n,c,{configurable:!0,get:function(){try{return i.call(this).match(r)[1]}catch(t){return""}}})},bee2:function(t,e,o){"use strict";function a(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}o.d(e,"a",(function(){return s}))},d81d:function(t,e,o){"use strict";var a=o("23e7"),s=o("b727").map,n=o("1dde"),i=o("ae40"),r=n("map"),c=i("map");a({target:"Array",proto:!0,forced:!r||!c},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-5e3645f8.44e18f39.js.map